# 软件截图：

![image](https://github.com/user-attachments/assets/5b9d6ea8-43cc-4d64-93eb-0b491ffbb961)

![image](https://github.com/user-attachments/assets/74fe4375-b80d-461e-944b-c274828f84b5)

![image](https://github.com/user-attachments/assets/61f97934-ecbc-4ea9-bae2-8d12cb3527b5)

![image](https://github.com/user-attachments/assets/a418b1cc-fbcc-4352-9281-d9cccd31910e)

# 多文件十六进制比对工具 - 全方位详细说明书

## 目录

1. [项目概述](#项目概述)
2. [适用人群](#适用人群)
3. [安装与运行](#安装与运行)
4. [界面详解](#界面详解)
5. [基础使用指南](#基础使用指南)
6. [高级功能详解](#高级功能详解)
7. [技术原理](#技术原理)
8. [应用场景](#应用场景)
9. [常见问题解答](#常见问题解答)
10. [版本更新历史](#版本更新历史)
11. [开发者信息](#开发者信息)
12. [版权与许可](#版权与许可)

## 项目概述

多文件十六进制比对工具是一款专业的二进制文件分析软件，支持同时打开多个文件并进行十六进制比对，提供差异高亮显示和编辑功能。该工具适用于软件开发、逆向工程、数字取证、数据恢复等多个领域。

### 核心功能

- 多文件同时打开并显示十六进制内容
- 自动比对文件差异并高亮显示
- 支持编辑模式和字节修改
- 同步滚动查看多个文件
- 文件历史记录管理
- 自定义颜色主题支持

## 适用人群

### 非技术人员

- **普通用户**：了解文件底层结构，验证文件完整性
- **学生**：学习计算机底层数据表示方式
- **爱好者**：探索文件格式，了解二进制世界

### 技术人员

- **软件开发者**：调试二进制数据，分析文件格式
- **安全研究员**：分析恶意软件，查找文件差异
- **逆向工程师**：研究程序二进制结构
- **数字取证专家**：比对证据文件，查找篡改痕迹
- **数据恢复专家**：分析损坏文件结构

### 行业应用

- **软件开发**：版本比对，补丁分析
- **网络安全**：恶意代码分析，入侵检测
- **司法取证**：电子证据验证
- **制造业**：固件分析，设备编程
- **金融行业**：二进制协议分析

## 安装与运行

### 系统要求

- 操作系统：Windows 7/10/11，Linux（需兼容库），macOS
- Python 3.6 或更高版本
- PyQt5 库

### 安装步骤

1. **基础安装**：
   ```
   pip install PyQt5
   git clone https://github.com/duma520/MultiFileHexCompare.git
   cd MultiFileHexCompare
   python Hex_Viewer.py
   ```

2. **打包为可执行文件**（可选）：
   ```
   pip install pyinstaller
   pyinstaller --onefile --windowed Hex_Viewer.py
   ```

3. **直接下载**：
   - 从GitHub发布页面下载预编译版本

### 首次运行配置

1. 首次运行会自动创建配置文件数据库
2. 界面语言自动匹配系统设置
3. 默认使用"Courier New"等宽字体，可手动修改

## 界面详解

### 主窗口布局

1. **顶部工具栏**：
   - 打开文件：添加要分析的文件
   - 清除所有：重置所有打开的文件
   - 开始比对：执行文件差异比对
   - 编辑模式：切换字节编辑功能

2. **文件列表区**：
   - 显示已打开文件的文件名、大小和完整路径
   - 支持多选和排序

3. **十六进制显示区**：
   - 左侧：文件偏移地址（十六进制）
   - 中部：十六进制字节表示
   - 右侧：ASCII字符表示

4. **状态栏**：
   - 显示当前状态和操作提示

### 颜色编码说明

- **白色背景**：正常字节
- **浅黄色背景**：差异行标记
- **浅红色背景**：具体差异字节
- **蓝色文本**：可打印ASCII字符
- **灰色文本**：不可打印字符显示为点(.)

## 基础使用指南

### 第一步：打开文件

1. 点击"打开文件"按钮或使用快捷键Ctrl+O
2. 选择要分析的一个或多个文件
3. 文件将显示在列表中并自动加载内容

*示例*：比较两个不同版本的配置文件，查看哪些部分被修改。

### 第二步：查看十六进制内容

1. 在文件列表点击任一文件
2. 主显示区将展示该文件的十六进制内容
3. 使用滚动条或鼠标滚轮浏览文件

*小技巧*：右侧ASCII区域可快速定位文本字符串。

### 第三步：比对文件差异

1. 确保至少两个文件已打开
2. 点击"开始比对"按钮
3. 差异部分将自动高亮显示

*示例*：比对两个图片文件，查看EXIF元数据差异。

### 第四步：使用编辑模式

1. 点击"编辑模式"按钮进入编辑状态
2. 在十六进制区域直接修改字节值
3. ASCII区域将自动更新

*注意*：编辑后需手动保存，程序不会自动写入原文件。

## 高级功能详解

### 1. 同步滚动查看

- 垂直和水平滚动条自动同步
- 方便并行比对文件相同偏移位置
- 可通过代码禁用同步功能

*应用场景*：分析两个版本的固件文件，保持相同地址对齐。

### 2. 差异高亮算法

- 基于第一个文件作为基准比对
- 逐字节比较所有文件
- 行级和字节级双重高亮

*技术细节*：差异检测时间复杂度O(n*m)，n为文件数，m为最大文件长度。

### 3. 字节编辑系统

- 实时十六进制输入验证
- ASCII表示自动更新
- 支持大文件编辑（GB级别）

*示例*：修改PE文件的资源段，调整程序行为。

### 4. 文件历史管理

- 自动记录最近打开的文件
- SQLite数据库存储历史记录
- 可扩展为项目管理系统

### 5. 自定义主题支持

通过修改`MacaronColors`类实现：
```python
class MacaronColors:
    # 粉色系
    SAKURA_PINK = '#FFB7CE'  # 樱花粉
    ROSE_PINK = '#FF9AA2'    # 玫瑰粉
    # 更多颜色定义...
```

## 技术原理

### 1. 文件加载机制

- 使用Python内置`open()`函数以二进制模式读取
- 内容存储在`bytearray`中便于修改
- 文件大小自动转换友好显示（KB/MB/GB）

### 2. 十六进制渲染引擎

- 每行固定显示16字节
- 地址偏移计算：`offset = line * bytes_per_line`
- 动态部件生成避免内存浪费

### 3. 差异检测算法

```python
# 伪代码
for 每个字节位置 from 0 to 最大文件长度:
    base_byte = 第一个文件的当前字节
    for 其他每个文件:
        if 当前文件长度 <= 当前位置 OR 当前字节 != base_byte:
            标记为差异
            break
```

### 4. 滚动同步系统

- 使用Qt信号槽机制
- 防止递归调用的标志位控制
- 多滚动条位置同步

## 应用场景

### 1. 软件开发

- **版本差异分析**：比较两个版本的二进制文件，快速定位修改
- **补丁制作**：分析更新包内容，提取关键修改
- **资源编辑**：直接修改程序资源段

### 2. 逆向工程

- **二进制比对**：分析破解前后的程序差异
- **协议分析**：捕获并比对网络数据包
- **壳识别**：比较加壳前后的代码段

### 3. 数字取证

- **证据比对**：验证原始证据与备份的一致性
- **数据恢复**：分析损坏文件结构
- **日志分析**：解析二进制日志文件

### 4. 嵌入式开发

- **固件分析**：比较不同版本的固件
- **配置解析**：查看设备的二进制配置文件
- **内存转储**：分析设备内存内容

### 5. 教育培训

- **计算机原理**：直观展示二进制数据
- **安全课程**：演示文件结构脆弱性
- **编程教学**：理解指针和内存概念

## 常见问题解答

### Q1: 为什么打开大文件很慢？

A: 程序采用即时渲染技术，超大文件(>100MB)建议：
1. 增加内存
2. 使用专业十六进制编辑器
3. 分批分析文件片段

### Q2: 编辑后如何保存修改？

A: 当前版本需要：
1. 使用"导出"功能(待实现)
2. 或通过Python脚本写入：
```python
with open('modified.bin', 'wb') as f:
    f.write(bytearray_content)
```

### Q3: 如何比对三个以上文件的共同差异？

A: 算法以第一个文件为基准，建议：
1. 先两两比对
2. 或修改代码实现多基准比对

### Q4: 支持哪些字符编码？

A: ASCII区域默认显示：
- 32-126：可打印字符
- 其他：显示为点(.)
- 可扩展支持Unicode

### Q5: 能否自定义每行显示的字节数？

A: 当前固定16字节/行，可修改代码中：
```python
bytes_per_line = 16  # 改为所需值
```

## 版本更新历史

### v3.8.0 (2025-05-26)
- 新增马卡龙色系主题支持
- 优化大文件加载性能
- 修复编辑模式下的同步问题
- 增强差异高亮算法

### v3.7.1 (2025-04-15)
- 添加SQLite历史记录功能
- 改进滚动同步机制
- 修复内存泄漏问题

### v3.6.0 (2025-03-10)
- 实现基本的编辑功能
- 添加ASCII区域自动更新
- 优化UI响应速度

### v3.5.2 (2025-02-18)
- 首次公开发布版本
- 核心比对功能完成
- 基础界面框架搭建

## 开发者信息

- **作者**：杜玛
- **联系方式**：通过GitHub Issues
- **项目主页**：https://github.com/duma520
- **开发语言**：Python 3
- **界面框架**：PyQt5
- **数据库**：SQLite3

## 版权与许可

- **版权声明**：© 永久 杜玛 保留所有权利
- **许可证**：MIT
- **使用限制**：
  - 禁止用于非法用途
  - 禁止去除版权信息
  - 商业使用需授权

---

*最后更新：2025-05-29*  
*本文档随项目版本更新而修订，请定期查看最新版本*  
*更多技术细节请参考源代码和GitHub Wiki*  

**注意**：我们不提供私人邮箱支持，所有技术支持都通过公开渠道进行，以便其他用户也能受益。
